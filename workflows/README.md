# EvaRoomBot - Telegram Bot –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –≤ n8n

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

EvaRoomBot - —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Å–∫–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤ —Å—Ä–µ–¥–µ n8n. –ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å DaData API –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ—Ü–µ–Ω–∫—É –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ 30+ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üè¢ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤** - –ø–æ–∏—Å–∫ –ø–æ –ò–ù–ù/–û–ì–†–ù —á–µ—Ä–µ–∑ DaData API
- üìä **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫–æ—Ä–∏–Ω–≥** - –æ—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –æ—Ç 0 –¥–æ 100 –±–∞–ª–ª–æ–≤
- üë§ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –§–ò–û, –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è, –ò–ù–ù
- üìÑ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ (–ò–ù–ù, –ö–ü–ü, –ë–ò–ö, —Å—á—ë—Ç)
- üí¨ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - inline-–∫–Ω–æ–ø–∫–∏ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –º–µ–Ω—é

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π n8n (cloud –∏–ª–∏ self-hosted)
- ‚úÖ Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))
- ‚úÖ DaData API Token –∏ Secret (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ [dadata.ru](https://dadata.ru))

### 2. –ò–º–ø–æ—Ä—Ç workflow –≤ n8n

1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ù–∞–∂–º–∏—Ç–µ **+ Add Workflow** ‚Üí **Import from File**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `EvaRoomBot.json`
4. Workflow –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Å–æ –≤—Å–µ–º–∏ –Ω–æ–¥–∞–º–∏

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—Ä–µ–¥–µ–Ω—à–∞–ª–æ–≤

#### Telegram Bot API

1. –í n8n –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Credentials** ‚Üí **+ Add Credential**
2. –í—ã–±–µ—Ä–∏—Ç–µ **Telegram API**
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à **Bot Token** –æ—Ç @BotFather
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å –∏–º–µ–Ω–µ–º "Telegram Bot API"

#### DaData API

1. –í n8n —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `DADATA_TOKEN` - –≤–∞—à API –∫–ª—é—á
   - `DADATA_SECRET` - –≤–∞—à Secret –∫–ª—é—á

### 4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Webhook

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—Ä–µ–¥–µ–Ω—à–∞–ª–æ–≤:

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow –≤ n8n
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Webhook URL –∏–∑ –Ω–æ–¥—ã "Telegram Trigger"
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ webhook:

```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=<YOUR_WEBHOOK_URL>"
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl "https://api.telegram.org/bot123456789:ABCdefGHIjklMNOpqrsTUVwxyz/setWebhook?url=https://your-n8n-instance.com/webhook/evaroombot"
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Workflow

```
[Telegram Trigger]
      ‚Üì
[Workflow Configuration] ‚Üê —Ö—Ä–∞–Ω–∏—Ç API –∫–ª—é—á–∏
      ‚Üì
[Session State] ‚Üê FSM —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
      ‚Üì
[Router] ‚Üê —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
   ‚îú‚îÄ‚îÄ Commands ‚Üí [Send Welcome Menu]
   ‚îú‚îÄ‚îÄ Callbacks ‚Üí [Route Actions]
   ‚îÇ                     ‚îú‚îÄ‚îÄ check_company ‚Üí [Ask INN for Check]
   ‚îÇ                     ‚îú‚îÄ‚îÄ score_company ‚Üí [Ask INN for Scoring]
   ‚îÇ                     ‚îú‚îÄ‚îÄ check_person ‚Üí [Ask Person Data]
   ‚îÇ                     ‚îú‚îÄ‚îÄ check_contract ‚Üí [Ask Contract Data]
   ‚îÇ                     ‚îî‚îÄ‚îÄ about_bot ‚Üí [Send About Info]
   ‚îî‚îÄ‚îÄ Text Search ‚Üí [DaData Find Company]
                           ‚Üì
                     [Calculate Scoring] ‚Üê –°–∫–æ—Ä–∏–Ω–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
                           ‚Üì
                     [Send Scoring Result]
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã

- `/start` - –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ **üè¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞**
2. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∏–ª–∏ –û–ì–†–ù –∫–æ–º–ø–∞–Ω–∏–∏
3. –ü–æ–ª—É—á–∏—Ç–µ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏–∏

#### 2. –°–∫–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ **üìä –°–∫–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞**
2. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏
3. –ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å –æ—Ü–µ–Ω–∫–æ–π 0-100 –±–∞–ª–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```
üìä –°–ö–û–†–ò–ù–ì –ö–û–ù–¢–†–ê–ì–ï–ù–¢–ê

–û–û–û "–ü–†–ò–ú–ï–†"

üìã –†–µ–∫–≤–∏–∑–∏—Ç—ã:
–ò–ù–ù: 7707083893
–û–ì–†–ù: 1027700132195
–ö–ü–ü: 770701001

–û—Ü–µ–Ω–∫–∞: 87 / 100
üü¢ –í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å

üí¨ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–†–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª–µ–Ω, –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—å–≥–æ—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.

üí≥ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É—Å–ª–æ–≤–∏—è –ø–ª–∞—Ç–µ–∂–∞:
–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 45 –¥–Ω–µ–π

‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:
‚úÖ –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã: 15 –ª–µ—Ç (+5)
üí∞ –ö—Ä—É–ø–Ω—ã–π —É—Å—Ç–∞–≤–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª (+5)
üìà –ü—Ä–∏–±—ã–ª—å –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ (+5)
‚úÖ –ö—Ä—É–ø–Ω—ã–π —à—Ç–∞—Ç: 120 —á–µ–ª. (+5)

‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

‚ùå –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:
–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–ª–∏—Ü–∞

1. –ù–∞–∂–º–∏—Ç–µ **üë§ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–ª–∏—Ü–∞**
2. –í–≤–µ–¥–∏—Ç–µ: `–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á, 01.01.1990, 123456789012`
3. –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞

1. –ù–∞–∂–º–∏—Ç–µ **üìÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞**
2. –í–≤–µ–¥–∏—Ç–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã: `–ò–ù–ù, –ö–ü–ü, –ë–ò–ö, —Å—á—ë—Ç`
3. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö n8n:

```env
DADATA_TOKEN=your_dadata_api_token_here
DADATA_SECRET=your_dadata_secret_key_here
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Workflow Configuration

–ù–æ–¥–∞ "Workflow Configuration" —Ö—Ä–∞–Ω–∏—Ç:
- `dadataApiUrl` - URL API DaData
- `dadataToken` - API —Ç–æ–∫–µ–Ω (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- `dadataSecret` - Secret –∫–ª—é—á (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- `botName` - –ò–º—è –±–æ—Ç–∞
- `botVersion` - –í–µ—Ä—Å–∏—è –±–æ—Ç–∞

## üìà –°–∫–æ—Ä–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

### –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞

```
–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ = 50 + Œ£(–≤–µ—Å –∫–∞–∂–¥–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è)
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å** (–¥–æ -25 –±–∞–ª–ª–æ–≤)
   - –í–æ–∑—Ä–∞—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏
   - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å
   - –ú–∞—Å—Å–æ–≤—ã–π –∞–¥—Ä–µ—Å
   - –£—Å—Ç–∞–≤–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª

2. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏** (–¥–æ ¬±10 –±–∞–ª–ª–æ–≤)
   - –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   - –í—ã—Ä—É—á–∫–∞
   - –ß–∏—Å—Ç—ã–µ –∞–∫—Ç–∏–≤—ã

3. **–î–æ–ª–≥–∏ –∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å** (–¥–æ -25 –±–∞–ª–ª–æ–≤)
   - –ù–∞–ª–æ–≥–æ–≤—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—á–µ—Ç–æ–≤
   - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
   - –†–ù–ü

4. **–°—É–¥–µ–±–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (–¥–æ ¬±15 –±–∞–ª–ª–æ–≤)
   - –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ –¥–µ–ª–∞
   - –ü—Ä–æ–∏–≥—Ä–∞–Ω–Ω—ã–µ —Å—É–¥—ã

5. **–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (–¥–æ -55 –±–∞–ª–ª–æ–≤)
   - –î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –ú–∞—Å—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –ò—Å—Ç–æ—Ä–∏—è –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤

6. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—è** (–¥–æ +25 –±–∞–ª–ª–æ–≤)
   - –§–∏–ª–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
   - –•–æ–ª–¥–∏–Ω–≥–∏
   - –°–∏—Å—Ç–µ–º–Ω–∞—è –∑–Ω–∞—á–∏–º–æ—Å—Ç—å
   - –§–æ—Ä–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–∞

| –ë–∞–ª–ª—ã | –£—Ä–æ–≤–µ–Ω—å | –£—Å–ª–æ–≤–∏—è –ø–ª–∞—Ç–µ–∂–∞ |
|-------|---------|-----------------|
| 95-100 | üü¢ –ù–∞–∏–≤—ã—Å—à–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å | –û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 60 –¥–Ω–µ–π |
| 85-94 | üü¢ –í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å | –û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 45 –¥–Ω–µ–π |
| 75-84 | üü° –ù–µ–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ | –û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 30 –¥–Ω–µ–π |
| 65-74 | üü° –£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ | –û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 14 –¥–Ω–µ–π |
| 50-64 | üü† –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ | –û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 7 –¥–Ω–µ–π |
| 30-49 | üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ | 40% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ |
| 0-29 | üî¥ –ö—Ä–∞–π–Ω–µ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ | 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ |

## üîÑ FSM (Finite State Machine)

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FSM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

### –°–æ—Å—Ç–æ—è–Ω–∏—è

- `IDLE` - –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∫–æ—è
- `MENU` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `WAIT_INN` - –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –ò–ù–ù
- `WAIT_PERSON` - –û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–∑–ª–∏—Ü–∞
- `WAIT_CONTRACT` - –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–∞

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

- –°–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `staticData.userStates`
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è: 24 —á–∞—Å–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π webhook
curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π webhook
curl "https://api.telegram.org/bot<TOKEN>/deleteWebhook"

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π
curl "https://api.telegram.org/bot<TOKEN>/setWebhook?url=<URL>"
```

### –ü—Ä–æ–±–ª–µ–º–∞: DaData –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DADATA_TOKEN –∏ DADATA_SECRET
- –ë–∞–ª–∞–Ω—Å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ DaData
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ò–ù–ù (10 —Ü–∏—Ñ—Ä)

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- Workflow –∞–∫—Ç–∏–≤–µ–Ω –≤ n8n
- –ö—Ä–µ–¥–µ–Ω—à–∞–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Webhook –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –õ–æ–≥–∏ n8n –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API DaData
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª —Å–∫–æ—Ä–∏–Ω–≥–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ n8n. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ workflow
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Executions**
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫—Ä–µ–¥–µ–Ω—à–∞–ª—ã –≤ Git
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è webhook
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ n8n –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

### Rate Limiting

DaData API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã:
- 10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
- 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting –≤ n8n –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Production

### 1. n8n Cloud

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [n8n.cloud](https://n8n.cloud)
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ workflow
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—Ä–µ–¥–µ–Ω—à–∞–ª—ã
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow

### 2. Self-hosted n8n

```bash
# Docker
docker run -it --rm \
  --name n8n \
  -p 5678:5678 \
  -e GENERIC_TIMEZONE="Europe/Moscow" \
  -e WEBHOOK_URL="https://your-domain.com/" \
  -e DADATA_TOKEN="your_token" \
  -e DADATA_SECRET="your_secret" \
  -v ~/.n8n:/home/node/.n8n \
  n8nio/n8n

# Docker Compose
version: "3.7"
services:
  n8n:
    image: n8nio/n8n
    restart: always
    ports:
      - "5678:5678"
    environment:
      - GENERIC_TIMEZONE=Europe/Moscow
      - WEBHOOK_URL=https://your-domain.com/
      - DADATA_TOKEN=${DADATA_TOKEN}
      - DADATA_SECRET=${DADATA_SECRET}
    volumes:
      - ~/.n8n:/home/node/.n8n
```

### 3. SSL/HTTPS

–î–ª—è production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS:

```bash
# Nginx reverse proxy
server {
    listen 443 ssl;
    server_name your-domain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://localhost:5678;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è n8n](https://docs.n8n.io/)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [DaData API](https://dadata.ru/api/)
- [–°–∫–æ—Ä–∏–Ω–≥–æ–≤–∞—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è](./SCORING.md)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Email: support@evacorebot.com
- üí¨ Telegram: [@EvaCoreBot](https://t.me/EvaCoreBot)
- üêõ Issues: [GitHub Issues](https://github.com/ArtemFilin1990/N8n_tele/issues)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ê–≤—Ç–æ—Ä—ã

- **EvaCoreBot Team** - –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **Community** - –í–∫–ª–∞–¥ –∏ —É–ª—É—á—à–µ–Ω–∏—è

---

**EvaRoomBot** - –Ω–∞–¥–µ–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –≤ Telegram! ü§ñ‚ú®
