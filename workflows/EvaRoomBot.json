{
  "name": "EvaRoomBot - Telegram Bot –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message",
          "callback_query"
        ]
      },
      "id": "telegram-trigger-001",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "evaroombot-webhook",
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "dadataApiUrl",
              "value": "https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party"
            },
            {
              "name": "dadataToken",
              "value": "={{$env.DADATA_TOKEN}}"
            },
            {
              "name": "dadataSecret",
              "value": "={{$env.DADATA_SECRET}}"
            },
            {
              "name": "botName",
              "value": "EvaRoomBot"
            },
            {
              "name": "botVersion",
              "value": "1.0"
            }
          ]
        },
        "options": {}
      },
      "id": "workflow-config-001",
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "functionCode": "// FSM (Finite State Machine) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst staticData = this.getWorkflowStaticData('global');\n\nif (!staticData.userStates) {\n  staticData.userStates = {};\n}\n\nconst chatId = items[0].json.message?.chat?.id || items[0].json.callback_query?.message?.chat?.id;\nconst messageText = items[0].json.message?.text || '';\nconst callbackData = items[0].json.callback_query?.data || '';\n\nif (!staticData.userStates[chatId]) {\n  staticData.userStates[chatId] = {\n    state: 'IDLE',\n    lastUpdate: Date.now()\n  };\n}\n\n// –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (—Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤)\nconst now = Date.now();\nfor (const id in staticData.userStates) {\n  if (now - staticData.userStates[id].lastUpdate > 86400000) {\n    delete staticData.userStates[id];\n  }\n}\n\nconst currentState = staticData.userStates[chatId];\n\n// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\ncurrentState.lastUpdate = now;\n\n// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\nlet messageType = 'unknown';\nif (messageText.startsWith('/')) {\n  messageType = 'command';\n  currentState.state = 'MENU';\n} else if (callbackData) {\n  messageType = 'callback';\n  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç callback\n  if (callbackData === 'check_company' || callbackData === 'score_company') {\n    currentState.state = 'WAIT_INN';\n  } else if (callbackData === 'check_person') {\n    currentState.state = 'WAIT_PERSON';\n  } else if (callbackData === 'check_contract') {\n    currentState.state = 'WAIT_CONTRACT';\n  } else if (callbackData === 'about_bot') {\n    currentState.state = 'IDLE';\n  }\n} else if (messageText && currentState.state !== 'IDLE' && currentState.state !== 'MENU') {\n  messageType = 'text_search';\n} else {\n  messageType = 'text';\n}\n\nreturn [{\n  json: {\n    ...items[0].json,\n    sessionState: {\n      chatId: chatId,\n      state: currentState.state,\n      messageType: messageType,\n      messageText: messageText,\n      callbackData: callbackData\n    }\n  }\n}];"
      },
      "id": "session-state-001",
      "name": "Session State",
      "type": "n8n-nodes-base.functionItem",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "mode": "rules",
        "rules": {
          "rules": [
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.messageType}}",
                    "operation": "equals",
                    "value": "command"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "commands"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.messageType}}",
                    "operation": "equals",
                    "value": "callback"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "callbacks"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.messageType}}",
                    "operation": "equals",
                    "value": "text_search"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "text_search"
            }
          ]
        },
        "options": {}
      },
      "id": "router-001",
      "name": "Router",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ EvaRoomBot! üöÄ\n\n–Ø –ø–æ–º–æ–≥—É –≤–∞–º:\n‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –ø–æ –ò–ù–ù/–û–ì–†–ù\nüìä –ü—Ä–æ–≤–µ—Å—Ç–∏ —Å–∫–æ—Ä–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏\nüë§ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ\nüìÑ –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–æ–≥–æ–≤–æ—Ä–∞\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "üè¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞",
                    "callbackData": "check_company"
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "üìä –°–∫–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞",
                    "callbackData": "score_company"
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "üë§ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–ª–∏—Ü–∞",
                    "callbackData": "check_person"
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "üìÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞",
                    "callbackData": "check_contract"
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "‚ÑπÔ∏è –û –±–æ—Ç–µ",
                    "callbackData": "about_bot"
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {}
      },
      "id": "send-welcome-menu-001",
      "name": "Send Welcome Menu",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1050, 100],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "mode": "rules",
        "rules": {
          "rules": [
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.callbackData}}",
                    "operation": "equals",
                    "value": "check_company"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "check_company"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.callbackData}}",
                    "operation": "equals",
                    "value": "score_company"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "score_company"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.callbackData}}",
                    "operation": "equals",
                    "value": "check_person"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "check_person"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.callbackData}}",
                    "operation": "equals",
                    "value": "check_contract"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "check_contract"
            },
            {
              "conditions": {
                "all": [
                  {
                    "field": "={{$json.sessionState.callbackData}}",
                    "operation": "equals",
                    "value": "about_bot"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "about_bot"
            }
          ]
        },
        "options": {}
      },
      "id": "route-actions-001",
      "name": "Route Actions",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "üè¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞\n\n–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∏–ª–∏ –û–ì–†–ù –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
        "additionalFields": {}
      },
      "id": "ask-inn-check-001",
      "name": "Ask INN for Check",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 200],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "üìä –°–∫–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞\n\n–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.",
        "additionalFields": {}
      },
      "id": "ask-inn-score-001",
      "name": "Ask INN for Scoring",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 300],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "üë§ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞\n\n–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n–§–ò–û, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì), –ò–ù–ù",
        "additionalFields": {}
      },
      "id": "ask-person-data-001",
      "name": "Ask Person Data",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 400],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "üìÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–∞\n\n–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n–ò–ù–ù, –ö–ü–ü, –ë–ò–ö, –Ω–æ–º–µ—Ä —Å—á—ë—Ç–∞",
        "additionalFields": {}
      },
      "id": "ask-contract-data-001",
      "name": "Ask Contract Data",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 500],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "‚ÑπÔ∏è –û –±–æ—Ç–µ EvaRoomBot\n\nü§ñ –í–µ—Ä—Å–∏—è: 1.0\nüìÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –î–µ–∫–∞–±—Ä—å 2024\n\nüéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ –¥–∞–Ω–Ω—ã–º –§–ù–°\n‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫–æ—Ä–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ (0-100 –±–∞–ª–ª–æ–≤)\n‚Ä¢ –ê–Ω–∞–ª–∏–∑ 30+ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –æ—Ü–µ–Ω–∫–∏\n‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü\n‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–æ–≤\n\nüìä –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:\n‚Ä¢ DaData API (–§–ù–°, —Å—É–¥–µ–±–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã)\n‚Ä¢ –§–°–°–ü (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)\n‚Ä¢ –†–µ–µ—Å—Ç—Ä –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤\n\nüí° –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∫–æ—Ä–∏–Ω–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å —É—á—ë—Ç–æ–º:\n- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∏ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏\n- –§–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π\n- –î–æ–ª–≥–æ–≤ –∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–µ–π\n- –°—É–¥–µ–±–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n- –ö–∞—á–µ—Å—Ç–≤–∞ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞\n- –†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤\n\n‚ö°Ô∏è –ö–æ–º–∞–Ω–¥—ã:\n/start - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n/help - –ü–æ–º–æ—â—å\n\nüìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞: support@evacorebot.com",
        "additionalFields": {}
      },
      "id": "send-about-info-001",
      "name": "Send About Info",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 600],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{$('Workflow Configuration').first().json.dadataApiUrl}}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Token ={{$('Workflow Configuration').first().json.dadataToken}}"
            },
            {
              "name": "X-Secret",
              "value": "={{$('Workflow Configuration').first().json.dadataSecret}}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "={{$json.sessionState.messageText}}"
            }
          ]
        },
        "options": {}
      },
      "id": "dadata-find-company-001",
      "name": "DaData Find Company",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1050, 500]
    },
    {
      "parameters": {
        "functionCode": "// –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∫–æ—Ä–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤\n// –ë–∞–∑–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞: 50 –±–∞–ª–ª–æ–≤, –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Å –≤–µ—Å–∞–º–∏\n\nconst items = $input.all();\nconst d = items[0].json.suggestions?.[0]?.data;\n\nif (!d) {\n  return [{\n    json: {\n      found: false,\n      message: \"‚ùå –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.\"\n    }\n  }];\n}\n\n// –ë–∞–∑–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞\nlet score = 50;\nconst redMarkers = [];\nconst yellowMarkers = [];\nconst greenMarkers = [];\n\n// === 1. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ò –Æ–†–ò–î–ò–ß–ï–°–ö–ò–ô –°–¢–ê–¢–£–° ===\n\n// –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∞–Ω–∏–∏\nswitch(d.state?.status) {\n  case 'ACTIVE':\n    // –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π, –Ω–µ –∏–∑–º–µ–Ω—è–µ–º –±–∞–ª–ª\n    break;\n  case 'LIQUIDATING':\n    score -= 25;\n    redMarkers.push('‚õî –ö–æ–º–ø–∞–Ω–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ (-25)');\n    break;\n  case 'BANKRUPT':\n    score -= 25;\n    redMarkers.push('‚õî –ö–æ–º–ø–∞–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–Ω–∞ –±–∞–Ω–∫—Ä–æ—Ç–æ–º (-25)');\n    break;\n  case 'LIQUIDATED':\n    score -= 25;\n    redMarkers.push('‚õî –ö–æ–º–ø–∞–Ω–∏—è –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–∞ (-25)');\n    break;\n  default:\n    score -= 20;\n    yellowMarkers.push(`‚ö†Ô∏è –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å: ${d.state?.status} (-20)`);\n}\n\n// –í–æ–∑—Ä–∞—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏\nif (d.state?.registration_date) {\n  const regDate = new Date(d.state.registration_date);\n  const years = (Date.now() - regDate.getTime()) / (1000 * 60 * 60 * 24 * 365);\n  \n  if (years < 1) {\n    score -= 15;\n    yellowMarkers.push('‚ö†Ô∏è –ö–æ–º–ø–∞–Ω–∏—è –º–µ–Ω–µ–µ 1 –≥–æ–¥–∞ (-15)');\n  } else if (years >= 1 && years < 3) {\n    score -= 5;\n    yellowMarkers.push(`‚ö†Ô∏è –ú–æ–ª–æ–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è: ${Math.floor(years)} –ª–µ—Ç (-5)`);\n  } else if (years >= 10 && years < 20) {\n    score += 5;\n    greenMarkers.push(`‚úÖ –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã: ${Math.floor(years)} –ª–µ—Ç (+5)`);\n  } else if (years >= 20) {\n    score += 10;\n    greenMarkers.push(`‚úÖ –ë–æ–ª—å—à–æ–π –æ–ø—ã—Ç: ${Math.floor(years)} –ª–µ—Ç (+10)`);\n  }\n}\n\n// –ù–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å —Å–≤–µ–¥–µ–Ω–∏–π\nif (d.state?.status === 'UNRELIABLE') {\n  score -= 20;\n  redMarkers.push('üö´ –ù–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –≤ –§–ù–° (-20)');\n}\n\n// –ú–∞—Å—Å–æ–≤—ã–π –∞–¥—Ä–µ—Å\nif (d.address?.data?.qc === '10') {\n  score -= 10;\n  yellowMarkers.push('‚ö†Ô∏è –ú–∞—Å—Å–æ–≤—ã–π –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (-10)');\n}\n\n// –£—Å—Ç–∞–≤–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª\nconst capital = parseFloat(d.capital?.value) || 0;\nif (capital > 0) {\n  if (capital <= 10000) {\n    score -= 5;\n    yellowMarkers.push('üí∏ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–≤–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª (-5)');\n  } else if (capital >= 1000000) {\n    score += 5;\n    greenMarkers.push('üí∞ –ö—Ä—É–ø–Ω—ã–π —É—Å—Ç–∞–≤–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª (+5)');\n  }\n}\n\n// === 2. –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò ===\n\n// –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤\nconst employees = parseInt(d.employees?.value) || 0;\nif (employees <= 1) {\n  score -= 10;\n  yellowMarkers.push('‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (-10)');\n} else if (employees > 50) {\n  score += 5;\n  greenMarkers.push(`‚úÖ –ö—Ä—É–ø–Ω—ã–π —à—Ç–∞—Ç: ${employees} —á–µ–ª. (+5)`);\n}\n\n// –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nif (d.finance?.profit !== undefined) {\n  const profit = parseFloat(d.finance.profit);\n  if (profit < 0) {\n    score -= 5;\n    redMarkers.push('üìâ –£–±—ã—Ç–∫–∏ –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ (-5)');\n  } else if (profit > 0) {\n    score += 5;\n    greenMarkers.push('üìà –ü—Ä–∏–±—ã–ª—å –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ (+5)');\n  }\n}\n\n// –í—ã—Ä—É—á–∫–∞\nif (d.finance?.revenue !== undefined) {\n  const revenue = parseFloat(d.finance.revenue);\n  if (revenue > 0) {\n    if (revenue < 1000000) {\n      score -= 5;\n      yellowMarkers.push('‚ö†Ô∏è –ù–∏–∑–∫–∞—è –≤—ã—Ä—É—á–∫–∞ (<1 –º–ª–Ω ‚ÇΩ) (-5)');\n    } else if (revenue >= 10000000 && revenue < 100000000) {\n      score += 3;\n      greenMarkers.push('‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞ (10-100 –º–ª–Ω ‚ÇΩ) (+3)');\n    } else if (revenue >= 100000000) {\n      score += 5;\n      greenMarkers.push('‚úÖ –ö—Ä—É–ø–Ω–∞—è –≤—ã—Ä—É—á–∫–∞ (‚â•100 –º–ª–Ω ‚ÇΩ) (+5)');\n    }\n  }\n}\n\n// –ß–∏—Å—Ç—ã–µ –∞–∫—Ç–∏–≤—ã\nif (d.finance?.assets !== undefined) {\n  const assets = parseFloat(d.finance.assets);\n  if (assets < 0) {\n    score -= 10;\n    redMarkers.push('üìä –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å—Ç—ã–µ –∞–∫—Ç–∏–≤—ã (-10)');\n  }\n}\n\n// === 3. –î–û–õ–ì–ò –ò –ó–ê–î–û–õ–ñ–ï–ù–ù–û–°–¢–¨ ===\n\n// –ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–æ –Ω–∞–ª–æ–≥–∞–º\nif (d.finance?.tax_debt !== undefined && d.finance.tax_debt > 0) {\n  score -= 10;\n  redMarkers.push(`üí≥ –ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–æ –Ω–∞–ª–æ–≥–∞–º: ${d.finance.tax_debt} ‚ÇΩ (-10)`);\n}\n\n// –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—á–µ—Ç–æ–≤\nif (d.state?.actuality_date && d.finance?.penalty !== undefined && d.finance.penalty > 0) {\n  score -= 5;\n  yellowMarkers.push('‚ö†Ô∏è –®—Ç—Ä–∞—Ñ—ã –∏ –ø–µ–Ω–∏ (-5)');\n}\n\n// === 4. –°–£–î–ï–ë–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨ ===\n\n// –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ –¥–µ–ª–∞\nif (d.documents?.fts_report?.defendant_count !== undefined) {\n  const defendantCases = parseInt(d.documents.fts_report.defendant_count);\n  if (defendantCases > 5) {\n    score -= 10;\n    redMarkers.push(`‚öñÔ∏è –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª (${defendantCases}) (-10)`);\n  } else if (defendantCases === 0 && years > 3) {\n    score += 5;\n    greenMarkers.push('‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—É–¥–µ–±–Ω—ã—Ö —Å–ø–æ—Ä–æ–≤ (+5)');\n  }\n}\n\n// === 5. –ú–ï–ù–ï–î–ñ–ú–ï–ù–¢ –ò –£–ü–†–ê–í–õ–ï–ù–ò–ï ===\n\n// –ú–∞—Å—Å–æ–≤—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å\nif (d.management?.head?.type === 'LEGAL' || d.management?.head?.manager_count > 10) {\n  score -= 15;\n  redMarkers.push('üë§ –ú–∞—Å—Å–æ–≤—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (-15)');\n}\n\n// –î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è\nif (d.management?.head?.disqualified === true) {\n  score -= 25;\n  redMarkers.push('üö´ –î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (-25)');\n}\n\n// –ú–∞—Å—Å–æ–≤—ã–π —É—á—Ä–µ–¥–∏—Ç–µ–ª—å\nif (d.founders && Array.isArray(d.founders)) {\n  const massFounders = d.founders.filter(f => f.manager_count > 10);\n  if (massFounders.length > 0) {\n    score -= 15;\n    redMarkers.push('üë• –ú–∞—Å—Å–æ–≤—ã–π —É—á—Ä–µ–¥–∏—Ç–µ–ª—å (-15)');\n  }\n}\n\n// === 6. –°–¢–†–£–ö–¢–£–†–ê –ò –†–ï–ü–£–¢–ê–¶–ò–Ø ===\n\n// –§–∏–ª–∏–∞–ª—ã\nif (d.branch_count !== undefined && d.branch_count > 3) {\n  score += 5;\n  greenMarkers.push(`‚úÖ –†–∞–∑–≤–∏—Ç–∞—è —Ñ–∏–ª–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å: ${d.branch_count} (+5)`);\n}\n\n// –§–æ—Ä–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ - –ü–ê–û\nif (d.opf?.code === '12247') {\n  score += 5;\n  greenMarkers.push('‚úÖ –ü—É–±–ª–∏—á–Ω–æ–µ –∞–∫—Ü–∏–æ–Ω–µ—Ä–Ω–æ–µ –æ–±—â–µ—Å—Ç–≤–æ (+5)');\n}\n\n// –°–∏—Å—Ç–µ–º–Ω–æ –∑–Ω–∞—á–∏–º–∞—è –∫–æ–º–ø–∞–Ω–∏—è\nif (capital >= 10000000000) {\n  score += 5;\n  greenMarkers.push('‚úÖ –°–∏—Å—Ç–µ–º–Ω–æ –∑–Ω–∞—á–∏–º–∞—è –∫–æ–º–ø–∞–Ω–∏—è (+5)');\n}\n\n// –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å —Ö–æ–ª–¥–∏–Ω–≥—É\nif (capital >= 1000000000 || (d.branch_count && d.branch_count > 10)) {\n  score += 5;\n  greenMarkers.push('‚úÖ –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫—Ä—É–ø–Ω–æ–º—É —Ö–æ–ª–¥–∏–Ω–≥—É (+5)');\n}\n\n// –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤\nif (redMarkers.length === 0 && yellowMarkers.length === 0 && d.state?.status === 'ACTIVE') {\n  score += 5;\n  greenMarkers.push('‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ (+5)');\n}\n\n// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ü–µ–Ω–∫–∏ (0-100)\nscore = Math.max(0, Math.min(100, score));\n\n// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π\nlet level, riskLevel, recommendation, paymentTerms;\n\nif (score >= 95) {\n  level = 'üü¢ –ù–∞–∏–≤—ã—Å—à–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å';\n  riskLevel = '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π';\n  recommendation = '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–æ–≤–µ—Ä–∏—è.';\n  paymentTerms = '–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 60 –¥–Ω–µ–π';\n} else if (score >= 85) {\n  level = 'üü¢ –í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å';\n  riskLevel = '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π';\n  recommendation = '–†–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª–µ–Ω, –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—å–≥–æ—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.';\n  paymentTerms = '–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 45 –¥–Ω–µ–π';\n} else if (score >= 75) {\n  level = 'üü° –ù–µ–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';\n  riskLevel = '–ù–µ–±–æ–ª—å—à–æ–π';\n  recommendation = '–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.';\n  paymentTerms = '–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 30 –¥–Ω–µ–π';\n} else if (score >= 65) {\n  level = 'üü° –£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫';\n  riskLevel = '–°—Ä–µ–¥–Ω–∏–π';\n  recommendation = '–í–æ–∑–º–æ–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ä–∞—Å—á—ë—Ç–æ–≤.';\n  paymentTerms = '–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 14 –¥–Ω–µ–π';\n} else if (score >= 50) {\n  level = 'üü† –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫';\n  riskLevel = '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π';\n  recommendation = '–î–æ–ø—É—Å—Ç–∏–º–∞ –∫–æ—Ä–æ—Ç–∫–∞—è –æ—Ç—Å—Ä–æ—á–∫–∞ –ø—Ä–∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–µ.';\n  paymentTerms = '–û—Ç—Å—Ä–æ—á–∫–∞ –¥–æ 7 –¥–Ω–µ–π';\n} else if (score >= 30) {\n  level = 'üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';\n  riskLevel = '–í—ã—Å–æ–∫–∏–π';\n  recommendation = '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã.';\n  paymentTerms = '–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –º–∏–Ω–∏–º—É–º 40%, –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏';\n} else {\n  level = 'üî¥ –ö—Ä–∞–π–Ω–µ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';\n  riskLevel = '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π';\n  recommendation = '–†–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–ª–Ω–æ–π –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ.';\n  paymentTerms = '100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞';\n}\n\nreturn [{\n  json: {\n    found: true,\n    company: d.name?.full_with_opf || d.name?.short_with_opf || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',\n    inn: d.inn,\n    ogrn: d.ogrn,\n    kpp: d.kpp,\n    address: d.address?.value || '–ù–µ —É–∫–∞–∑–∞–Ω',\n    status: d.state?.status || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',\n    registrationDate: d.state?.registration_date || '–ù–µ —É–∫–∞–∑–∞–Ω–∞',\n    capital: capital,\n    employees: employees,\n    score: score,\n    level: level,\n    riskLevel: riskLevel,\n    recommendation: recommendation,\n    paymentTerms: paymentTerms,\n    markers: {\n      red: redMarkers,\n      yellow: yellowMarkers,\n      green: greenMarkers\n    },\n    chatId: items[0].json.sessionState?.chatId\n  }\n}];"
      },
      "id": "calculate-scoring-001",
      "name": "Calculate Scoring",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1250, 500]
    },
    {
      "parameters": {
        "chatId": "={{$json.chatId}}",
        "text": "=üìä **–°–ö–û–†–ò–ù–ì –ö–û–ù–¢–†–ê–ì–ï–ù–¢–ê**\\n\\n**{{$json.company}}**\\n\\nüìã **–†–µ–∫–≤–∏–∑–∏—Ç—ã:**\\n–ò–ù–ù: `{{$json.inn}}`\\n–û–ì–†–ù: `{{$json.ogrn}}`\\n–ö–ü–ü: `{{$json.kpp}}`\\n\\nüìç –ê–¥—Ä–µ—Å: {{$json.address}}\\nüìÖ –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: {{$json.registrationDate}}\\nüíº –£–ö: {{$json.capital}} ‚ÇΩ\\nüë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: {{$json.employees}}\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n**{{$json.level}}**\\n**–û—Ü–µ–Ω–∫–∞: {{$json.score}} / 100**\\n\\nüéØ –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: {{$json.riskLevel}}\\n\\nüí¨ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**\\n{{$json.recommendation}}\\n\\nüí≥ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É—Å–ª–æ–≤–∏—è –ø–ª–∞—Ç–µ–∂–∞:**\\n{{$json.paymentTerms}}\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n{{$json.markers.green.length > 0 ? '‚úÖ **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:**\\n' + $json.markers.green.join('\\n') : ''}}\\n\\n{{$json.markers.yellow.length > 0 ? '‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**\\n' + $json.markers.yellow.join('\\n') : ''}}\\n\\n{{$json.markers.red.length > 0 ? '‚ùå **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:**\\n' + $json.markers.red.join('\\n') : '‚úÖ –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç'}}\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n_–î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –Ω–∞ {{new Date().toLocaleDateString('ru-RU')}}_\\n_–ò—Å—Ç–æ—á–Ω–∏–∫: DaData (–§–ù–°, —Å—É–¥–µ–±–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã)_",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "id": "send-scoring-result-001",
      "name": "Send Scoring Result",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1450, 500],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$json.sessionState.chatId}}",
        "text": "={{$json.found ? '‚úÖ –ö–æ–º–ø–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞!\\n\\n–ù–∞–∑–≤–∞–Ω–∏–µ: ' + $json.company + '\\n–ò–ù–ù: ' + $json.inn + '\\n–û–ì–†–ù: ' + $json.ogrn + '\\n–°—Ç–∞—Ç—É—Å: ' + $json.status : '‚ùå –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.'}}",
        "additionalFields": {}
      },
      "id": "send-company-info-001",
      "name": "Send Company Info",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 700],
      "credentials": {
        "telegramApi": {
          "id": "1",
          "name": "Telegram Bot API"
        }
      }
    }
  ],
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Workflow Configuration": {
      "main": [
        [
          {
            "node": "Session State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Session State": {
      "main": [
        [
          {
            "node": "Router",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Router": {
      "main": [
        [
          {
            "node": "Send Welcome Menu",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Route Actions",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "DaData Find Company",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Actions": {
      "main": [
        [
          {
            "node": "Ask INN for Check",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ask INN for Scoring",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ask Person Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ask Contract Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send About Info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DaData Find Company": {
      "main": [
        [
          {
            "node": "Calculate Scoring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculate Scoring": {
      "main": [
        [
          {
            "node": "Send Scoring Result",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1",
  "id": "evaroombot-workflow",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "evaroombot-instance"
  },
  "tags": [
    {
      "createdAt": "2024-12-06T00:00:00.000Z",
      "updatedAt": "2024-12-06T00:00:00.000Z",
      "id": "1",
      "name": "telegram-bot"
    },
    {
      "createdAt": "2024-12-06T00:00:00.000Z",
      "updatedAt": "2024-12-06T00:00:00.000Z",
      "id": "2",
      "name": "scoring"
    },
    {
      "createdAt": "2024-12-06T00:00:00.000Z",
      "updatedAt": "2024-12-06T00:00:00.000Z",
      "id": "3",
      "name": "dadata"
    }
  ]
}
